{% extends "layout.html" %}
{% block title %} Equipment Details {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/equipment.css') }}" />
{% endblock %}

{% block content %}

<!-- Header -->
{% include 'partials/header.html' %}

<div class="equipment-container-wrapper">
  <div class="equipment-grid" id="equipment-list">
    <!-- Buraya dinamik veriler gelecek -->
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    let equipmentList = document.getElementById("equipment-list");

    // **SessionStorage'dan verileri al**
    let equipmentData = JSON.parse(sessionStorage.getItem("equipment_data")) || [];

    if (equipmentData.length === 0) {
      equipmentList.innerHTML = "<p style='color: red; width: 300px;'>Ekipman verisi bulunamadı.</p>";
      return;
    }

    // **Ekipmanları sırayla ekleyelim**
    equipmentData.forEach(equipment => {
      let statusClass = equipment.status === 1 ? "green" : "red";
      let equipmentBox = document.createElement("div");
      equipmentBox.className = `equipment-box ${statusClass}`;
      equipmentBox.innerHTML = `${equipment.model_name}`;
      
      // Equipment box'a tıklanınca yönlendirme yap
      equipmentBox.addEventListener("click", function() {
          window.location.href = "/equipment-details";
      });
      
      equipmentList.appendChild(equipmentBox);
    });
  });
</script>


{% endblock %}
