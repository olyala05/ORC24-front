{% extends 'layout.html' %}

{% block title %} ORC 24 - Login - Pier MTTP {% endblock %}

{% block content %}
<!-- Virtual Keyboard -->   
<div id="keyboard-container" class="simple-keyboard"></div>

  <div class="container">
    <div class="login-header">
      <div class="line line-left"></div>
      <img src="{{ url_for('static', filename='images/logos/logo-01.webp') }}" alt="Pier MTTP Logo" class="logo" />
      <div class="line line-right"></div>
    </div>

    <!-- Login Form Wrapper -->
    <div class="login-wrapper">
      <div class="login-box">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('login') }}"> 
          <div class="input-group">
            <span class="icon icon-left"><img src="{{ url_for('static', filename='images/svg/22.svg') }}" alt="User" width="20" height="20" ></span>
            <input type="text" name="email" placeholder="{{ _('Email') }}" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" required />
          </div>

          <div class="input-group">
            <span class="icon icon-left"><img src="{{ url_for('static', filename='images/svg/21.svg') }}" alt="Lock" width="20" height="20" ></span>
            <input type="password" name="password" id="password-input" placeholder="{{ _('Password') }}"  autocomplete="new-password" autocorrect="off" autocapitalize="none" spellcheck="false" required />
            <span class="icon icon-right" id="toggle-password"><i class="fa-solid fa-eye"></i></span>
          </div>
          
          <div class="login-actions">
            <button type="submit" class="login-btn">{{ _('Login') }}  <img src="{{ url_for('static', filename='images/svg/17.svg') }}" alt="Login" width="30" height="30"  style="padding: 7px 9px; background: #0B1734; border-radius: 5px;"> </button>

            <!-- DİL SEÇİCİ -->
            <div class="language-switcher">
              <button class="language-toggle">
                <img src="{{ url_for('static', filename='images/svg/globe.svg') }}" width="24" height="24" alt="Globe Icon">
              </button>
                <div class="language-dropdown">
                  <button type="button" onclick="setLanguage('tr')">
                    <img src="{{ url_for('static', filename='images/flags/tr.png') }}" width="20"> TR
                  </button>
                  <button type="button" onclick="setLanguage('en')">
                    <img src="{{ url_for('static', filename='images/flags/uk.png') }}" width="20"> EN
                  </button>
                  <button type="button" onclick="setLanguage('de')">
                    <img src="{{ url_for('static', filename='images/flags/de.png') }}" width="20"> DE
                  </button>
                </div>
              
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>


  <script>
    function setLanguage(lang) {
      fetch("{{ url_for('set_language') }}", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "lang=" + lang
      }).then(() => {
        window.location.reload();  
      });
    }
  </script>
  
{% endblock %}
