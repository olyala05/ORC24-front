{% extends "layout.html" %} {% block title %} Modem Selection {% endblock %} {%
block content %}

<div class="header">
  <div class="header-left">
    <!-- Home Butonu -->
    <button class="header-button" onclick="goToDashboard()">
      {{ _('Home')}}
      <img
        src="{{ url_for('static', filename='images/svg/19.svg') }}"
        alt="Logout"
        width="30"
        height="30"
        style="padding: 9px 9px; background: #0b1734; border-radius: 5px"
      />
    </button>
    <!-- Alarm icon -->
    <div class="alarm-icon-container">
      <button class="alarm-button" onclick="goToAlarm()" title="Alarm">
        <img
          src="{{ url_for('static', filename='images/svg/32.svg') }}"
          alt="Alarm"
          width="32"
          height="32"
        />
      </button>
      <span id="alarm-count" class="alarm-badge" display="none">0</span>
    </div>
  </div>

  <div class="header-logo">
    <img
      src="{{ url_for('static', filename='images/logos/logo-01.webp') }}"
      alt="Pier MTTP Logo"
      class="logo"
    />
  </div>

  <div class="header-right">
    <div class="date-time" id="currentDateTime"></div>
    <div class="report-line">
      <div class="line"></div>
    </div>
    <div class="report-date">{{ _('Modem Selection') }}</div>
  </div>
</div>

<!-- Sayfa İçeriği -->
<main class="content">
  <div class="modem-selection">
    <!-- Modem Dropdown -->
    <div class="dropdown-container">
      <div class="modem-dropdown-wrapper">
        <img
          id="modem-icon"
          src="{{ url_for('static', filename='images/svg/40.svg') }}"
          alt="Modems"
          class="modem-dropdown-icon"
        />
        <select id="modem" class="modem-dropdown" onchange="connectDevice()">
          <option value="" disabled selected>{{ _('Loading...') }}</option>
        </select>
      </div>
    </div>

    <div class="button-container">
      <button class="btn" onclick="goToORCStatus()">
        {{ _('ORC Status') }}
      </button>
      <button class="btn" onclick="goToEquipment()">
        {{ _('Equipment') }}
      </button>
      <button class="btn" onclick="goToSetting()">{{ _('Settings') }}</button>
    </div>

    <div class="bottom-buttons">
      <button class="btn" onclick="SwitchtTest()">{{ _('Test') }}</button>
      <button class="btn" onclick="goToData()">{{ _('Data') }}</button>
    </div>

    <div id="status"></div>
  </div>
</main>
<!-- Select2 -->
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='select2-develop/css/select2.min.css') }}"
/>
<!-- Javascript Kodu -->
<script src="{{ url_for('static', filename='select2-develop/js/select2.min.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<!-- jQuery (select2 için gerekli) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  // Sayfa yüklendiğinde cihazları getir
  document.addEventListener("DOMContentLoaded", fetchDevices);

  // Dashboard Sayfasına Yönlendirir
  function goToDashboard() {
    window.location.href = "/dashboard";
  }

  // Active butonu seçme
  document.addEventListener("DOMContentLoaded", function () {
    // Tüm butonları seç
    let buttons = document.querySelectorAll(
      ".button-container .btn, .bottom-buttons .btn"
    );

    buttons.forEach((button) => {
      button.addEventListener("click", function () {
        // Önce tüm butonlardan `active` sınıfını kaldır
        buttons.forEach((btn) => btn.classList.remove("active"));

        // Tıklanan butona `active` sınıfını ekle
        this.classList.add("active");
      });
    });
  });

function fetchDevices() {
    let dropdown = document.getElementById("modem");
    let modemIcon = document.getElementById("modem-icon");  // Simgeyi kontrol etmek için ID ekledik

    // Loading yazısını başlangıçta gösteriyoruz
    let defaultOption = dropdown.querySelector("option");
    defaultOption.textContent = "Loading..."; // Loading yazısı görünsün

    // Loading simgesini gösteriyoruz (40.svg)
    modemIcon.src = "{{ url_for('static', filename='images/svg/40.svg') }}";  // "40.svg" simgesini başta gösteriyoruz

    // Fetch işlemi başlıyor
    fetch("/devices")
      .then((response) => response.json())
      .then((data) => {
        dropdown.innerHTML = ""; // Dropdown'ı temizliyoruz

        // Veriler yüklendikten sonra "Select Modem" yazısını gösteriyoruz
        let newDefaultOption = document.createElement("option");
        newDefaultOption.value = "";
        newDefaultOption.disabled = true;
        newDefaultOption.selected = true;
        newDefaultOption.textContent = "{{ _('Select Modem') }}"; // "Select Modem"
        dropdown.appendChild(newDefaultOption);

        // Verileri ekliyoruz
        data.forEach((device) => {
          let option = document.createElement("option");
          option.value = device.ip; // IP adresi kullanılacak

          // Modem adı, MAC adresi ve IP adresi
          let nameText = `${device.name}`;
          let macText = `${device.mac}`; // MAC adresi
          let ipText = `${device.ip}`; // IP adresi

          // Modem adı üstte, MAC ve IP'yi altta yan yana yazdırıyoruz
          option.innerHTML = `
            <div class="modem-name">${nameText}</div>
            <div class="mac-ip">
              <span class="mac-address">${macText}</span>
              <span class="ip-address">${ipText}</span>
            </div>
          `;
          dropdown.appendChild(option);
        });

        // Veriler yüklendikten sonra "38.svg" simgesini gösteriyoruz
        modemIcon.src = "{{ url_for('static', filename='images/svg/38.svg') }}";  // "38.svg" simgesine geçiş yapıyoruz

        // Select2'yi tekrar başlatıyoruz
        $(dropdown).select2({
          templateResult: formatOption, // Custom Template for Option
          templateSelection: formatSelection, // Custom Template for Selection
        });
      })
      .catch((error) => {
        console.error("{{ _('Error while retrieving devices:')}}", error);
      });
}


// Custom Template for Option
function formatOption(option) {
  if (!option.id) {
    return option.text;
  } // Return if it's the default "Select Modem" option

  var $option = $("<span></span>");
  var name = $('<div class="modem-name"></div>').text(option.text);
  var mac = $('<div class="mac-address"></div>').text($(option.element).data("mac"));
  var ip = $('<div class="ip-address"></div>').text($(option.element).data("ip"));

  $option.append(name).append(mac).append(ip);
  return $option;
}

// Custom Template for Selected Item
function formatSelection(option) {
  return option.text;
}

  // Sayfa yüklendiğinde fetchDevices fonksiyonunu çağırıyoruz
  document.addEventListener("DOMContentLoaded", fetchDevices);

  // ORC Status
  function goToORCStatus() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return;
    }

    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('ORC Status is loading...')}}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay);

    window.location.href = `/orc-status?ip_address=${selectedDeviceIP}`;

    window.addEventListener("pageshow", function () {
      let loader = document.getElementById("loading-overlay");
      if (loader) loader.remove();
    });
  }

  // Equipment With Model
  function goToEquipment() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK')}}",
      });
      return;
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('Equipments are loading...') }}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay);

    console.log(" `fetch` başlatılıyor: /equipments-with-models");

    fetch("/equipments-with-models", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ ip_address: selectedDeviceIP }),
    })
      .then((response) => response.json())
      .then((data) => {
        console.log("Equipment Response:", data);

        if (!data || data.error) {
          console.warn("{{ _('Backend Error')}}:", data.error);
          Swal.fire({
            icon: "error",
            title: "{{ _('Error!') }}",
            text:
              data.error || "{{ _('Equipment data could not be retrieved.')}}",
            confirmButtonText: "{{ _('OK') }}",
          });
          return;
        }

        // **SessionStorage içine kaydet**
        sessionStorage.setItem("equipment_data", JSON.stringify(data.data));

        // **Yeni sayfaya yönlendir**
        window.location.href = "/equipment";
      })
      .catch((error) => {
        console.error("Ekipman verisi alırken hata oluştu:", error);
        Swal.fire({
          icon: "error",
          title: "{{ _('Error!') }}",
          text: "{{ _('Equipment data could not be retrieved. Please try again.')}}",
          confirmButtonText: "{{ _('OK') }}",
        });
      })
      .finally(() => {
        let loader = document.getElementById("loading-overlay");
        if (loader) loader.remove();
      });
  }

  // Setting
  function goToSetting() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      // Kullanıcıya uyarı ver
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return; // İşlemi durdur
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
            <div class="loading-box">
              <p> {{ _('Settings are loading...') }}</p>
              <div class="loader"></div>
            </div>`;
    document.body.appendChild(loadingOverlay);

    window.location.href = "/settings";
  }

  // Test Sayfasına Yönlendirir
  function SwitchtTest() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      // Kullanıcıya uyarı ver
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return;
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('Test is loading...')}}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay); // **Sayfaya ekle**

    setTimeout(() => {
      window.location.href = "/switch";
    }, 100);
  }

  // data
  function goToData() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      // Kullanıcıya uyarı ver
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return; // İşlemi durdur
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('Data is loading...')}}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay);

    window.location.href = "/data";
  }

  function goToEquipmentSetting() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    if (!selectedDeviceIP) {
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return;
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('Equipments are being scanned...') }}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay);

    fetch("/modbus_request", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ ip_address: selectedDeviceIP }),
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.error) {
          alert("Hata: " + data.error);
          return;
        }

        // Modbus verilerini Equipment sayfasına yönlendirmeden önce sakla
        sessionStorage.setItem("modbus_data", JSON.stringify(data.modbus_data));

        // Equipment sayfasına yönlendir
        window.location.href = "/equipment-setting";
      })
      .catch((error) => {
        console.error(
          "{{ _('An error occurred while retrieving Modbus data:') }}",
          error
        );
        alert(
          "{{ _('Equipment data could not be retrieved. Please try again.') }}"
        );
      })
      .finally(() => {
        // **Loading ekranını kaldır**
        let loader = document.getElementById("loading-overlay");
        if (loader) loader.remove();
      });
  }

  function updateDateTime() {
    const now = new Date();

    // Gün, ay, yıl formatında al (DD Month YYYY)
    const options = { day: "2-digit", month: "long", year: "numeric" };
    const formattedDate = now.toLocaleDateString("tr-TR", options);

    // Saat ve dakikayı ekle (HH:MM formatında)
    const formattedTime = now.toLocaleTimeString("tr-TR", {
      hour: "2-digit",
      minute: "2-digit",
    });

    // HTML içine ekle
    document.getElementById(
      "currentDateTime"
    ).textContent = `${formattedDate} ${formattedTime}`;
  }

  updateDateTime();

  setInterval(updateDateTime, 60000);

  window.addEventListener("pageshow", function (event) {
    let loader = document.getElementById("loading-overlay");
    if (loader) {
      loader.remove();
    }
  });

  // Alarm Sayfasına Yönlendirir
  function goToAlarm() {
    let dropdown = document.getElementById("modem");
    let selectedDeviceIP = dropdown ? dropdown.value : null;

    // Eğer cihaz seçilmemişse kesinlikle yönlendirme yapma ve uyarı ver
    if (!selectedDeviceIP) {
      Swal.fire({
        icon: "warning",
        title: "{{ _('Warning') }}",
        text: "{{ _('Please select a device first!') }}",
        confirmButtonText: "{{ _('OK') }}",
      });
      return;
    }

    // **Loading ekranını ekleyelim**
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
          <div class="loading-box">
            <p> {{ _('Redirecting to the alarm page...') }}</p>
            <div class="loader"></div>
          </div>`;
    document.body.appendChild(loadingOverlay);

    // **Cihaz bilgisi çekilip yönlendirme yapılacak**
    fetch("/get_selected_device")
      .then((response) => response.json())
      .then((data) => {
        if (!data.ip_address) {
          Swal.fire({
            icon: "warning",
            title: "{{ _('Warning')}}",
            text: "{{ _('Please select a device first!') }}",
            confirmButtonText: "{{ _('OK')}}",
          });
          return;
        }

        window.location.href = `/alarm?ip_address=${data.ip_address}`;
      })
      .catch((error) => {
        console.error("Cihaz seçme hatası:", error);
        Swal.fire({
          icon: "error",
          title: "{{ _('Error!') }}",
          text: "{{ _('Device information could not be retrieved. Please try again.')}}",
          confirmButtonText: "{{ _('OK') }}",
        });
      })
      .finally(() => {
        let loader = document.getElementById("loading-overlay");
        if (loader) loader.remove();
      });
  }

  // AbortController değişkenleri (İlk başta boş)
  let networkAlarmController = new AbortController();
  let electricAlarmController = new AbortController();
  let alarmUpdateInterval = null;

  function updateAlarmCount() {
    let selectedDeviceIP = sessionStorage.getItem("selected_device_ip");
    let alarmBadge = document.getElementById("alarm-count");

    //  Eğer cihaz seçili değilse API çağrılarını durdur ve alarmı sıfırla
    if (!selectedDeviceIP || selectedDeviceIP.trim() === "") {
      console.warn("Cihaz seçili değil, alarm sıfırlandı!");

      // Eski istekleri iptal et
      networkAlarmController.abort();
      electricAlarmController.abort();

      // Yeni istekler için yeni AbortController oluştur
      networkAlarmController = new AbortController();
      electricAlarmController = new AbortController();

      // Interval çalışıyorsa durdur
      if (alarmUpdateInterval) {
        clearInterval(alarmUpdateInterval);
        alarmUpdateInterval = null;
      }

      localStorage.removeItem("last_alarm_count");
      alarmBadge.textContent = "0";
      alarmBadge.style.display = "inline-block";
      return;
    }

    console.log("Seçili cihaz:", selectedDeviceIP);

    let totalAlarms = 0;
    let errorOccurred = false;

    // **Network Alarmlarını Çek**
    fetch(`/get_network_alarm_data?ip=${selectedDeviceIP}`, {
      signal: networkAlarmController.signal,
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.status === "success") {
          totalAlarms += data.data.length;
        } else {
          console.error("Network alarm verisi alınamadı:", data.message);
          errorOccurred = true;
        }
        return fetch(`/get_electric_alarm_data?ip=${selectedDeviceIP}`, {
          signal: electricAlarmController.signal,
        });
      })
      .then((response) => response.json())
      .then((data) => {
        if (data.status === "success") {
          totalAlarms += data.data.length;
        } else {
          console.error("Electric alarm verisi alınamadı:", data.message);
          errorOccurred = true;
        }

        //  Eğer hata olduysa alarm sayısını sıfırla
        if (errorOccurred) {
          console.warn("Hata oluştuğu için alarm sıfırlandı.");
          totalAlarms = 0;
        }

        //  Alarm değerini göster
        alarmBadge.textContent = totalAlarms;
        alarmBadge.style.display = "inline-block";

        //  Yeni alarm değerini localStorage'a kaydet
        localStorage.setItem("last_alarm_count", totalAlarms);
      })
      .catch((error) => {
        if (error.name === "AbortError") {
          console.warn("{{ _('The alarm data request has been canceled.')}}");
        } else {
          console.error(
            "{{ _('Alarm data could not be retrieved for the selected device:') }}",
            error
          );
        }
        alarmBadge.textContent = "0";
        alarmBadge.style.display = "inline-block";
      });
  }

  // Cihaz Seçme Fonksiyonu
  function connectDevice() {
    let dropdown = document.getElementById("modem");
    let selectedDevice = dropdown.value;

    if (!selectedDevice || selectedDevice.trim() === "") {
      showToast("{{ _('Please select a device first!') }}", "error");
      setButtonsDisabled(true);
      return;
    }

    // Loader oluştur ve göster
    let loadingOverlay = document.createElement("div");
    loadingOverlay.id = "loading-overlay";
    loadingOverlay.className = "loading-overlay";
    loadingOverlay.innerHTML = `
      <div class="loading-box">
        <p> {{ _('Connecting to the device , please wait...') }}</p>
        <div class="loader"></div>
      </div>`;
    document.body.appendChild(loadingOverlay);

    fetch("/connect_device", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ ip_address: selectedDevice }),
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          showToast(
            "{{ _('Successfully connected to the device!') }}",
            "success"
          );
          sessionStorage.setItem("selected_device_ip", selectedDevice);
          setButtonsDisabled(false);
        } else {
          showToast("{{ _('Failed to connect to the device!') }}", "error");
          sessionStorage.removeItem("selected_device_ip");
          setButtonsDisabled(true);
          Swal.fire({
            icon: "error",
            title: "{{ _('Connection Error')}}",
            text: "{{ _('Unable to proceed as the device could not be connected!')}}",
            confirmButtonText: "{{ _('OK') }}",
          });
        }
      })
      .catch((error) => {
        console.error("{{ _('Connection Error')}}:", error);
        showToast(
          "{{ _('An error occurred during the connection.') }}",
          "error"
        );
        sessionStorage.removeItem("selected_device_ip");
        setButtonsDisabled(true);
        Swal.fire({
          icon: "error",
          title: "{{ _('Connection Error')}}",
          text: "{{ _('An error occurred during the connection.') }}",
          confirmButtonText: "{{ _('Ok')}}",
        });
      })
      .finally(() => {
        // Loader'ı kaldır
        let loader = document.getElementById("loading-overlay");
        if (loader) loader.remove();
      });
  }

  function showToast(message, type) {
    let toast = document.createElement("div");
    toast.className = `toast-message ${type}`;
    toast.innerText = message;

    document.body.appendChild(toast);

    setTimeout(() => {
      toast.classList.add("fade-out");
      setTimeout(() => {
        toast.remove();
      }, 500);
    }, 3000);
  }

  // Sayfa Yüklendiğinde Çalıştır
  document.addEventListener("DOMContentLoaded", function () {
    let selectedDeviceIP = sessionStorage.getItem("selected_device_ip");
    let alarmBadge = document.getElementById("alarm-count");

    if (!selectedDeviceIP) {
      console.warn(
        "{{ _('The page has been refreshed, no device found, alarm reset!') }}"
      );

      networkAlarmController.abort();
      electricAlarmController.abort();

      networkAlarmController = new AbortController();
      electricAlarmController = new AbortController();

      localStorage.removeItem("last_alarm_count");

      alarmBadge.textContent = "0";
      alarmBadge.style.display = "inline-block";
    } else {
      updateAlarmCount();
    }
  });

  function setButtonsDisabled(isDisabled) {
    let buttons = document.querySelectorAll(
      ".button-container .btn, .bottom-buttons .btn"
    );
    buttons.forEach((btn) => (btn.disabled = isDisabled));
  }

  document.addEventListener("DOMContentLoaded", () => {
    setButtonsDisabled(true);
  });
</script>

<style>
  div:where(.swal2-container) div:where(.swal2-popup) {
    width: 28em;
  }

  div:where(.swal2-container) h2:where(.swal2-title) {
    padding: 0.1em 0;
  }

  div:where(.swal2-icon) {
    width: 4em;
    height: 4em;
    margin: 0.8em auto 0.6em;
  }
  div:where(.swal2-container) div:where(.swal2-actions) {
    margin: 0.25em auto 0;
  }

  div:where(.swal2-container) div:where(.swal2-html-container) {
    padding: 0.25em 1.4em 0.2em;
  }

  div:where(.swal2-icon).swal2-error [class^="swal2-x-mark-line"] {
    display: block;
    position: absolute;
    top: 2em;
    width: 1.9375em;
    height: 0.3125em;
    border-radius: 0.125em;
    background-color: #f27474;
  }

  .toast-message {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    color: white;
    font-size: 16px;
    border-radius: 5px;
    z-index: 1000;
    opacity: 1;
    transition: opacity 0.5s ease-in-out;
  }

  .toast-message.success {
    background-color: #28a745;
  }

  .toast-message.error {
    background-color: #dc3545;
  }

  .fade-out {
    opacity: 0;
  }
  .modem-dropdown-wrapper {
    position: relative;
    display: inline-block;
  }

  .modem-dropdown-icon {
    position: absolute;
    top: 50%;
    left: 10px;
    transform: translateY(-50%);
    width: 28px;
    height: 28px;
    border-radius: 5px;
    padding: 5px;
    pointer-events: none;
    z-index: 1;
  }
  /* Cihazlar için listede görünüm */
  .modem-dropdown-wrapper {
    position: relative;
  }

  .modem-dropdown option {
    padding: 10px;
    font-size: 14px;
    line-height: 1.5;
    display: flex;
    flex-direction: column;
  }

  .modem-dropdown .mac-ip {
    display: flex;
    justify-content: space-between;
  }

  .modem-dropdown .mac-address {
    color: #ec7427; /* MAC adresi için turuncu */
  }

  .modem-dropdown .ip-address {
    color: #6384d1 !important; 
  }

  .modem-dropdown .modem-name {
    color: #6384d1; 
    font-weight: bold !important;
  }

  .select2-container--default .select2-selection--single {
    background-color: #1c2747;
    border: 1px solid #aaa;
    border-radius: 4px;
    height: 51px;
    text-align: start;
    padding-left: 47px;
    padding-top: 12px;
  }
  .select2-container--default
    .select2-selection--single
    .select2-selection__rendered {
    color: #fff;
    line-height: 28px;
    font-weight: 700;
    font-size: 18px;
  }
  .select2-container--default
    .select2-selection--single
    .select2-selection__arrow
    b {
    border-color: #fff rgba(0, 0, 0, 0) #fff rgba(0, 0, 0, 0);
    border-style: solid;
    border-width: 10px 8px 0 8px;
    height: 0;
    left: -7%;
    margin-left: -4px;
    margin-top: -2px;
    position: absolute;
    top: 86%;
    width: 0;
  }
  .select2-container--default.select2-container--open
    .select2-selection--single
    .select2-selection__arrow
    b {
    border-color: rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) #fff rgba(0, 0, 0, 0);
    border-width: 0 8px 10px 8px;
  }

  /* select2 input kısmını gizle */
  .select2-search__field {
    display: none !important;
  }

  /* Dropdown menüsünü düzgün göster */
  .select2-container--default .select2-selection--single {
    padding-right: 0; /* Arama kutusunun sağındaki boşluğu kaldır */
  }
  .modem-dropdown {
    -webkit-appearance: none; /* Safari/Chrome */
    -moz-appearance: none; /* Firefox */
    appearance: none; /* Diğer tarayıcılar */
    background: none; /* Ok yerine arka plan düzleşir */
    padding-right: 10px; /* Ok yoksa sağ boşluk ayarı */
    border: 1px solid #ccc; /* İsteğe bağlı stil */
  }

  .select2-container--default
    .select2-results__option--highlighted.select2-results__option--selectable {
    background-color: #e2e2e2 !important;
    color: #1b2746;
  }

  .select2-results__option--selectable {
    cursor: pointer;
    color: .select2-container--default
      .select2-results__option--highlighted.select2-results__option--selectable;
    color: #1b2746;
  }
</style>
{% endblock %}
